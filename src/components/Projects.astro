---
import Section from "./Section.astro";
import { Image } from "astro:assets";
import type { ProjectProps } from "@types";

interface Props {
  projects: ProjectProps[];
}

const { projects } = Astro.props;
---

<Section text="Featured Projects" href="projects">
  <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
    {
      projects.map(({ name, summary, image }, index) => (
        <div class="group">
          <!-- Main Card with fixed size -->
          <div 
            class="relative rounded-2xl border border-primary/20 bg-black/50 backdrop-blur-sm hover:border-primary/40 transition-all duration-300 hover:scale-105 project-card cursor-pointer h-96"
            data-project-index={index}
          >
            <!-- Project number badge -->
            <div class="absolute top-4 left-4 z-10 flex items-center justify-center w-8 h-8 bg-primary/20 backdrop-blur-sm rounded-full border border-primary/30">
              <span class="text-xs font-bold text-primary">{index + 1}</span>
            </div>
            
            <!-- Tech stack indicators -->
            <div class="absolute top-4 right-4 z-10 flex gap-1">
              <div class="w-2 h-2 bg-blue-400 rounded-full opacity-60"></div>
              <div class="w-2 h-2 bg-green-400 rounded-full opacity-60"></div>
              <div class="w-2 h-2 bg-yellow-400 rounded-full opacity-60"></div>
            </div>
            
            <!-- Project image -->
            <div class="relative h-48 overflow-hidden rounded-t-2xl">
              <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent z-10"></div>
              <Image
                class="h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"
                src={image}
                alt={name}
                width="400"
                height="250"
              />
            </div>
            
            <!-- Project content - Fixed height, content stays inside -->
            <div class="p-6 h-48 flex flex-col overflow-hidden">
              <div class="flex items-center gap-2 mb-3">
                <span class="text-xl">üè¢</span>
                <h3 class="font-serif text-lg font-medium text-primary group-hover:text-primary-light transition-colors duration-300">
                  {name}
                </h3>
              </div>
              
              <p class="text-sm text-neutral leading-relaxed line-clamp-4 overflow-hidden">
                {summary.slice(0, 120) + "..."}
              </p>
            </div>
            
            <!-- Subtle background pattern -->
            <div class="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none rounded-2xl"></div>
          </div>
          
          <!-- Click to view details - OUTSIDE the card -->
          <div class="text-center mt-4">
            <span class="text-xs text-primary/80 hover:text-primary transition-colors">
              Click to view details ‚Üí
            </span>
          </div>
        </div>
      ))
    }
  </div>
  
  <!-- Project Modal -->
  <div id="project-modal" class="fixed inset-0 bg-black z-[99999] hidden overflow-y-auto">
    <!-- Solid backdrop covering entire viewport -->
    <div class="absolute inset-0 bg-black"></div>
    <div class="relative min-h-screen px-4 py-16 flex items-center justify-center">
      <div class="bg-gradient-to-br from-slate-900/98 to-black/98 backdrop-blur-xl border-2 border-primary/40 rounded-3xl max-w-5xl w-full max-h-[80vh] overflow-hidden shadow-2xl shadow-primary/20 ring-1 ring-primary/10 relative">
      <!-- Decorative gradient overlay -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-primary-light/5 pointer-events-none rounded-3xl"></div>
      
      <!-- Modal Header -->
      <div class="relative flex items-center justify-between p-8 border-b border-primary/30 bg-gradient-to-r from-primary/5 to-transparent">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-gradient-to-br from-primary/20 to-primary-light/20 rounded-xl flex items-center justify-center border border-primary/30">
            <span id="modal-icon" class="text-2xl">üí°</span>
          </div>
          <h2 id="modal-title" class="font-serif text-3xl font-bold text-white bg-gradient-to-r from-primary to-primary-light bg-clip-text text-transparent">Project Title</h2>
        </div>
        <button 
          onclick="closeProjectModal()"
          class="text-neutral hover:text-white transition-all duration-300 p-3 hover:bg-red-500/20 rounded-2xl group border border-transparent hover:border-red-500/30"
        >
          <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <!-- Modal Content -->
      <div class="grid md:grid-cols-5 gap-8 p-8 max-h-[calc(80vh-160px)] overflow-y-auto">
        <!-- Left side - Image (2/5 width) -->
        <div class="md:col-span-2 relative">
          <div class="relative rounded-2xl overflow-hidden border-2 border-primary/20 shadow-xl">
            <img id="modal-image" src="" alt="" class="w-full h-80 md:h-96 object-cover" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"></div>
            <div class="absolute top-4 left-4 flex gap-2">
              <div class="w-3 h-3 bg-blue-400 rounded-full opacity-80 shadow-lg shadow-blue-400/50"></div>
              <div class="w-3 h-3 bg-green-400 rounded-full opacity-80 shadow-lg shadow-green-400/50"></div>
              <div class="w-3 h-3 bg-yellow-400 rounded-full opacity-80 shadow-lg shadow-yellow-400/50"></div>
            </div>
          </div>
        </div>
        
        <!-- Right side - Content with scroll (3/5 width) -->
        <div class="md:col-span-3 flex flex-col">
          <!-- Company Description -->
          <div id="modal-company" class="mb-6 hidden">
            <div class="bg-gradient-to-r from-yellow-400/10 to-orange-400/10 border border-yellow-400/30 rounded-2xl p-4">
              <h3 class="text-base font-bold text-yellow-400 mb-3 flex items-center gap-2">
                <span class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></span>
                Company Overview:
              </h3>
              <p id="modal-company-desc" class="text-sm text-neutral/90 leading-relaxed"></p>
            </div>
          </div>
          
          <!-- Main Content -->
          <div class="flex-1">
            <div class="bg-gradient-to-r from-primary/10 to-primary-light/10 border border-primary/30 rounded-2xl p-5">
              <h3 id="modal-content-title" class="text-lg font-bold text-primary mb-4 flex items-center gap-2">
                <span class="w-2 h-2 bg-primary rounded-full animate-pulse"></span>
                My Contributions:
              </h3>
              <div class="max-h-64 overflow-y-auto pr-3 custom-scrollbar">
                <div id="modal-description" class="text-sm text-neutral/95 leading-relaxed space-y-3"></div>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="flex gap-4 mt-6 pt-6 border-t-2 border-gradient-to-r from-primary/30 to-primary-light/30">
            <div id="modal-source-container" class="flex-1">
              <a
                id="modal-source-link"
                href="#"
                target="_blank"
                class="w-full flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-slate-700/30 to-slate-600/30 border-2 border-slate-500/40 rounded-2xl text-slate-300 hover:from-primary/20 hover:to-primary-light/20 hover:border-primary/50 hover:text-primary transition-all duration-300 text-sm font-semibold justify-center shadow-lg hover:shadow-primary/20 hidden group"
              >
                <span class="text-xl group-hover:scale-110 transition-transform duration-300">üìÇ</span> 
                <span>Source Code</span>
              </a>
              <div id="modal-source-disabled" class="w-full relative group hidden">
                <button
                  class="w-full flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-neutral/10 to-neutral/5 border-2 border-neutral/20 rounded-2xl text-neutral/50 cursor-not-allowed text-sm font-semibold justify-center shadow-lg"
                  disabled
                >
                  <span class="text-xl opacity-50">üìÇ</span> 
                  <span>Source Code</span>
                </button>
                <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 px-4 py-2 bg-black/95 text-white text-xs rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap z-20 border border-primary/30">
                  No public repository
                  <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-black/95"></div>
                </div>
              </div>
            </div>
            <a
              id="modal-demo-link"
              href="#"
              target="_blank"
              class="flex-1 flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-primary/20 to-primary-light/20 border-2 border-primary/40 rounded-2xl text-primary hover:from-primary hover:to-primary-light hover:text-white transition-all duration-300 text-sm font-semibold justify-center shadow-lg hover:shadow-primary/30 group"
            >
              <span id="modal-demo-icon" class="text-xl group-hover:scale-110 transition-transform duration-300">üöÄ</span>
              <span id="modal-demo-text">Visit Website</span>
            </a>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>
</Section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Project data for modal
    const projectsData = [
    {
      name: "Appwork Technologies",
      summary: "Leading Elixir/Phoenix development for property maintenance platform serving thousands of users. Built fault-tolerant systems using GenServers and OTP supervision trees. Optimized database performance handling 100k+ queries/day with PostgreSQL. Implemented real-time features using Phoenix LiveView and PubSub. Architected scalable microservices with proper error handling and monitoring. Integrated with multiple property management platforms like Yardi, RealPage, and Entrata. Built comprehensive admin dashboards with real-time analytics and reporting features.",
      image: "/Appwork-project.png",
      linkPreview: "https://appworkco.com/",
      linkSource: null,
      companyDescription: "Maintenance management software built for property managers, technicians and residents to modernize multifamily maintenance.",
      isAppwork: true
    },
    {
      name: "Picsello",
      summary: "Developed feature-rich LiveView applications for photography business management platform. Built booking systems with real-time scheduling, business email automation integrated with SendGrid for client communication workflows, external calendar integration via Nylas API for seamless appointment management, and bulk image uploads with multi-zip support using Google Cloud Platform. Maintained high code quality through comprehensive test coverage, static analysis tools like Credo and Dialyzer, and clean architecture practices in an Elixir/Phoenix environment. Implemented secure payment processing, client gallery management, and automated workflow systems.",
      image: "/Picsello-Project.png",
      linkPreview: "https://www.picsello.com/",
      linkSource: null,
      companyDescription: "All-in-one photography business software that helps photographers reduce business management overwhelm by streamlining client communication, booking, galleries, and financial processes.",
      isAppwork: true
    },
    {
      name: "SafeBoda",
      summary: "Led Safeboda's critical migration from legacy PHP codebase to scalable Elixir microservices architecture. Developed core services for ride lifecycle management including driver matching, route optimization, and real-time tracking. Built robust user authentication and authorization systems with role-based access control. Extended platform capabilities into the fintech domain by developing payment processing services, wallet management, and transaction handling systems. Built interactive tools with Phoenix LiveView, GraphQL APIs, REST endpoints, and JavaScript Hooks to enhance civic engagement workflows. Implemented admin dashboard features including onboarding flows for vendors and riders, operational statistics, and comprehensive business reporting using GenServers, RabbitMQ, Kafka, and Phoenix framework.",
      image: "/SafeBoda-project.png", 
      linkPreview: "https://www.safeboda.com/",
      linkSource: null,
      companyDescription: "Ride-hailing service providing safe, convenient, and affordable transportation with trained drivers, offering motorcycle rides, car transportation, and package delivery in Kenya.",
      isAppwork: true
    }
  ];

  // Add click listeners to project cards
  const projectCards = document.querySelectorAll('.project-card');
  projectCards.forEach((card, index) => {
    card.addEventListener('click', () => openProjectModal(index));
  });

  function openProjectModal(index: number) {
    const project = projectsData[index];
    const modal = document.getElementById('project-modal');
    if (!modal) return;
    
    // Prevent body scroll when modal is open
    document.body.style.overflow = 'hidden';
    
    // Update modal content
    const modalIcon = document.getElementById('modal-icon');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image') as HTMLImageElement;
    const modalDescription = document.getElementById('modal-description');
    
    if (modalIcon) modalIcon.textContent = project.isAppwork ? 'üè¢' : 'üí°';
    if (modalTitle) modalTitle.textContent = project.name;
    if (modalImage) {
      modalImage.src = project.image;
      modalImage.alt = project.name;
    }
    if (modalDescription) {
      let content = '';
      
      if (project.name === 'Appwork Technologies') {
        // Detailed content for Appwork
        content = `
          <div class="space-y-6">
            <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-blue-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üîß</span> What I Work On:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">End-to-end development</span> of new features for AppWork's <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">B2B platform</span>.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">Backend services</span> for performance-critical workflows, user-facing dashboards, and automation flows.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Real-time bug resolution</span> in production systems to ensure stability and user satisfaction.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Performance audits</span> on high-volume database queries affecting UX and platform responsiveness.</span>
                </li>
              </ul>
            </div>
            
            <div class="bg-gradient-to-r from-green-500/10 to-teal-500/10 border border-green-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-green-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üõ†Ô∏è</span> Tech Stack:
              </h4>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Elixir</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Phoenix Framework</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">REST APIs</span>
              </div>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">GenServers</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Oban Jobs</span>
                <span class="text-xs text-neutral/70">(for scheduled background tasks)</span>
              </div>
              <div class="flex flex-wrap gap-2">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">PostgreSQL</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">LiveView</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">React</span>
                <span class="text-xs text-neutral/70">(Frontend)</span>
              </div>
              <p class="text-sm text-neutral/90 mt-3">3rd-party integrations with external APIs</p>
            </div>
            
            <div class="bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-purple-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üìå</span> Responsibilities:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Implementing and shipping</span> new features based on business requirements.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Handling production-level bugs</span> with priority and deploying hotfixes.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Leading performance improvements</span>, including query optimizations and bottleneck identification.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Collaborating with cross-functional teams</span> to improve user experience, especially in data-intensive workflows.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Maintaining code quality</span>, architecture decisions, and ensuring reliable deployments.</span>
                </li>
              </ul>
            </div>
          </div>
        `;
      } else if (project.name === 'Picsello') {
        // Detailed content for Picsello
        content = `
          <div class="space-y-6">
            <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-blue-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üé®</span> What I Built:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Developed customizable email templates</span> (internal and via <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">SendGrid</span>) and introduced automation features for business workflows, including reminder emails.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Built the booking slots system</span> allowing clients to check photographers' availability and schedule sessions.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Integrated Nylas</span> to sync external calendars for <span class="px-1.5 py-0.5 bg-green-400/20 text-green-300 rounded font-bold">real-time availability</span>.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Implemented bulk image uploads</span> to <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">Google Cloud Storage</span> and dynamically generated ZIP archives.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span>For large data sets, <span class="text-primary-light font-semibold">developed a feature</span> to split uploads into multiple zips and support resumable downloads.</span>
                </li>
              </ul>
            </div>
            
            <div class="bg-gradient-to-r from-green-500/10 to-teal-500/10 border border-green-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-green-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üõ†Ô∏è</span> Tech Stack:
              </h4>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Elixir</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Phoenix LiveView</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">TailwindCSS</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">PostgreSQL</span>
              </div>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">SendGrid</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Nylas</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Google Cloud Storage</span>
                <span class="text-xs text-neutral/70">(GCP)</span>
              </div>
              <p class="text-sm text-neutral/90 mt-3">Custom JS Hooks for enhanced LiveView behavior</p>
            </div>
            
            <div class="bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-purple-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üìå</span> Responsibilities:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Delivered new product features</span> from planning to production</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Maintained code quality</span> using tools like <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">Credo</span> and <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">Dialyzer</span></span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Wrote comprehensive test coverage</span> to ensure stability and maintainability</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Collaborated with product and design teams</span> to improve UX and performance</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Refactored legacy code</span> for clarity, performance, and modularity</span>
                </li>
              </ul>
            </div>
          </div>
        `;
      } else if (project.name === 'SafeBoda') {
        // Detailed content for SafeBoda
        content = `
          <div class="space-y-6">
            <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-blue-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üöÄ</span> What I Built:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Contributed to platform evolution</span> from a monolithic <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">PHP backend</span> to <span class="px-1.5 py-0.5 bg-yellow-400/20 text-yellow-300 rounded font-semibold">Elixir-based microservices</span>.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Built ride lifecycle microservice</span> managing end-to-end logic for ride creation, allocation, tracking, and status transitions.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Developed authentication microservice</span> responsible for secure user login, token validation, and session lifecycle.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Contributed to fintech services</span> handling transactional workflows and payment processing systems.</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Enhanced Admin Dashboard</span> with interfaces for vendor and rider onboarding, operational data, and performance metrics.</span>
                </li>
              </ul>
            </div>
            
            <div class="bg-gradient-to-r from-green-500/10 to-teal-500/10 border border-green-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-green-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üõ†Ô∏è</span> Tech Stack:
              </h4>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Elixir</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">GenServers</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Phoenix</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">GraphQL</span>
              </div>
              <div class="flex flex-wrap gap-2 mb-3">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">RabbitMQ</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Kafka</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Microservices</span>
              </div>
              <div class="flex flex-wrap gap-2">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">Phoenix LiveView</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">JavaScript Hooks</span>
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">PostgreSQL</span>
              </div>
              <p class="text-sm text-neutral/90 mt-3">Legacy PHP to modern Elixir migration architecture</p>
            </div>
            
            <div class="bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/30 rounded-xl p-4">
              <h4 class="text-base font-bold text-purple-400 mb-3 flex items-center gap-2">
                <span class="text-lg">üìå</span> Responsibilities:
              </h4>
              <ul class="space-y-2 text-sm text-neutral/90">
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Designed and developed</span> robust, high-throughput systems for ride-hailing operations</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Led microservice development</span> for ride lifecycle, authentication, and fintech workflows</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Built admin interfaces</span> for vendor onboarding, rider management, and operational metrics</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Enabled scalable migration</span> from legacy systems to modern Elixir-powered architecture</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></span>
                  <span><span class="text-primary-light font-semibold">Ensured platform reliability</span> during fast-scaling growth across East Africa</span>
                </li>
              </ul>
            </div>
          </div>
        `;
      } else {
        // Format the description with highlighting for other projects
        content = project.summary
          .replace(/(Elixir|Phoenix|LiveView|GenServers|OTP|Oban|Ecto|PostgreSQL|GraphQL|REST|API|microservices|real-time|PubSub|JavaScript|TypeScript|React|Vue|Docker|AWS|GCP|Redis|MongoDB|RabbitMQ|Kafka)/gi, 
            '<span class="px-2 py-1 bg-yellow-400/20 text-yellow-300 rounded-lg font-semibold border border-yellow-400/30">$1</span>')
          .replace(/(built|developed|implemented|architected|optimized|migrated|led|created|designed)/gi,
            '<span class="text-primary-light font-semibold">$1</span>')
          .replace(/(\d+k\+|\d+%|\d+\+)/g,
            '<span class="px-1 py-0.5 bg-green-400/20 text-green-300 rounded font-bold">$1</span>');
      }
      
      modalDescription.innerHTML = content;
    }
    
    // Handle company description for Appwork
    const companySection = document.getElementById('modal-company');
    const companyDesc = document.getElementById('modal-company-desc');
    const contentTitle = document.getElementById('modal-content-title');
    
    if (project.isAppwork && project.companyDescription) {
      if (companySection) companySection.classList.remove('hidden');
      if (companyDesc) companyDesc.textContent = project.companyDescription;
      if (contentTitle) contentTitle.textContent = 'My Role:';
    } else {
      if (companySection) companySection.classList.add('hidden');
      if (contentTitle) contentTitle.textContent = 'Description:';
    }
    
    // Handle source button
    const sourceLink = document.getElementById('modal-source-link') as HTMLAnchorElement;
    const sourceDisabled = document.getElementById('modal-source-disabled');
    
    if (project.linkSource) {
      if (sourceLink) {
        sourceLink.href = project.linkSource;
        sourceLink.classList.remove('hidden');
      }
      if (sourceDisabled) sourceDisabled.classList.add('hidden');
    } else {
      if (sourceLink) sourceLink.classList.add('hidden');
      if (sourceDisabled) sourceDisabled.classList.remove('hidden');
    }
    
    // Handle demo/visit button
    const demoLink = document.getElementById('modal-demo-link') as HTMLAnchorElement;
    const demoIcon = document.getElementById('modal-demo-icon');
    const demoText = document.getElementById('modal-demo-text');
    
    if (demoLink) demoLink.href = project.linkPreview;
    if (demoIcon) demoIcon.textContent = project.isAppwork ? 'üåê' : 'üöÄ';
    if (demoText) demoText.textContent = project.isAppwork ? 'Visit Site' : 'Live Demo';
    
    // Show modal
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    
    // Prevent body scroll
    document.body.style.overflow = 'hidden';
  }

  function closeProjectModal() {
    const modal = document.getElementById('project-modal');
    if (modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }
    
    // Restore body scroll
    document.body.style.overflow = 'auto';
  }

  // Close modal when clicking outside
  const modal = document.getElementById('project-modal');
  if (modal) {
    modal.addEventListener('click', function(e) {
      if (e.target === this) {
        closeProjectModal();
      }
    });
  }

  // Close modal with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeProjectModal();
    }
  });

  // Make closeProjectModal globally accessible
  (window as any).closeProjectModal = closeProjectModal;
  });
</script>

<style>
  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(32, 178, 170, 0.1);
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(32, 178, 170, 0.5);
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(32, 178, 170, 0.7);
  }
  
  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(32, 178, 170, 0.5) rgba(32, 178, 170, 0.1);
  }
</style>
